# FatSecret OAuth Removal - Summary of Changes

## –ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ FatSecret –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ, —á—Ç–æ:

**FatSecret OAuth 2.0 –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç authorization code flow** (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤).

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ:
- ‚úÖ `client_credentials` grant type (server-to-server –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- ‚ùå `authorization_code` grant type –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ FatSecret –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç OAuth 1.0 three-legged flow, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–ø–∏—Å–∏ OAuth —Å–µ—Ä–≤–∏—Å–∞.

## –ü—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ OAuth –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ:
- ‚úÖ Client credentials –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π —á–µ—Ä–µ–∑ /settings (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –≤ –±–æ—Ç–µ (—Ä–∞–±–æ—Ç–∞–µ—Ç)

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. Agent API - OAuth Endpoints

**–§–∞–π–ª:** [services/agent-api/src/api/v1/endpoints/oauth.py](services/agent-api/src/api/v1/endpoints/oauth.py)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ—è—Å–Ω–µ–Ω–∏–µ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –æ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏–º–ø–æ—Ä—Ç `fatsecret_oauth_service`
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω endpoint `POST /oauth/fatsecret/authorize`
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω endpoint `GET /oauth/fatsecret/callback`
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω endpoint `POST /oauth/fatsecret/sync`
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω endpoint `POST /oauth/fatsecret/disconnect`

**–¢–µ–ø–µ—Ä—å –≤—Å–µ OAuth endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç:**
```json
{
  "detail": "FatSecret OAuth 2.0 user authorization not supported. Use manual goal setup via /settings."
}
```

### 2. Telegram Bot - FatSecret Commands

**–§–∞–π–ª:** [services/telegram-bot/src/bot/handlers/fatsecret.py](services/telegram-bot/src/bot/handlers/fatsecret.py)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ—è—Å–Ω–µ–Ω–∏–µ –æ –ø—Ä–∏—á–∏–Ω–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ `/connect_fatsecret` - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ `/disconnect_fatsecret` - –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –Ω–µ—Ç
- ‚úÖ `/sync_fatsecret` - –æ–±—ä—è—Å–Ω—è–µ—Ç, —á—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

**–ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥:**
```
/connect_fatsecret:
"‚ÑπÔ∏è –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ FatSecret –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, FatSecret API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ OAuth 2.0.

–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
‚úÖ –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –±–∞–∑–µ FatSecret
‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∏—â–µ–≤–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏
‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –≤ –±–æ—Ç–µ

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /settings –¥–ª—è —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–∏—Ö —Ü–µ–ª–µ–π –ø–æ –ö–ë–ñ–£."
```

### 3. Telegram Bot - Settings Handler

**–§–∞–π–ª:** [services/telegram-bot/src/bot/handlers/settings.py](services/telegram-bot/src/bot/handlers/settings.py)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ FatSecret –∏–∑ `_format_goals()` (–±—ã–ª–∞ —Å—Ç—Ä–æ–∫–∞ "üîó FatSecret: ‚úÖ/‚ùå")
- ‚úÖ –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω callback handler `settings_connect_fatsecret`

**–ë—ã–ª–æ:**
```
‚öôÔ∏è –í–∞—à–∏ —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

üéØ –¶–µ–ª—å: –ü–æ—Ö—É–¥–µ–Ω–∏–µ

üìä –î–Ω–µ–≤–Ω—ã–µ —Ü–µ–ª–∏ –ø–æ –ö–ë–ñ–£:
‚Ä¢ –ö–∞–ª–æ—Ä–∏–∏: 2000 –∫–∫–∞–ª
‚Ä¢ –ë–µ–ª–∫–∏: 150–≥

üîó FatSecret: ‚ùå –ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω  ‚Üê –£–ë–†–ê–ù–û
```

**–°—Ç–∞–ª–æ:**
```
‚öôÔ∏è –í–∞—à–∏ —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

üéØ –¶–µ–ª—å: –ü–æ—Ö—É–¥–µ–Ω–∏–µ

üìä –î–Ω–µ–≤–Ω—ã–µ —Ü–µ–ª–∏ –ø–æ –ö–ë–ñ–£:
‚Ä¢ –ö–∞–ª–æ—Ä–∏–∏: 2000 –∫–∫–∞–ª
‚Ä¢ –ë–µ–ª–∫–∏: 150–≥
```

### 4. Telegram Bot - Inline Keyboards

**–§–∞–π–ª:** [services/telegram-bot/src/bot/keyboards/inline.py](services/telegram-bot/src/bot/keyboards/inline.py)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å FatSecret" –∏–∑ settings keyboard

**–ë—ã–ª–æ:**
```
‚öôÔ∏è –í–∞—à–∏ —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
...

[üéØ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–ª–∏ –ø–æ –ö–ë–ñ–£]
[üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å FatSecret]  ‚Üê –£–ë–†–ê–ù–û
```

**–°—Ç–∞–ª–æ:**
```
‚öôÔ∏è –í–∞—à–∏ —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
...

[üéØ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–ª–∏ –ø–æ –ö–ë–ñ–£]
```

## –ß—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ FatSecret API**
   - MCP FatSecret —Å–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç client credentials
   - –î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∏—â–µ–≤–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏

2. **–†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π**
   - –ö–æ–º–∞–Ω–¥–∞ /settings –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π –ø–æ –ö–ë–ñ–£ –≤—Ä—É—á–Ω—É—é
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

3. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è**
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–Ω–æ–π –µ–¥—ã
   - –û—Ç—á–µ—Ç—ã /today –∏ /week
   - AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

4. **–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ—Ç–∞**
   - –¢–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥ –µ–¥—ã
   - –§–æ—Ç–æ —ç—Ç–∏–∫–µ—Ç–æ–∫ (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
   - –î–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è
   - –û—Ç—á–µ—Ç—ã

## –ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏ –Ω–µ –±—É–¥–µ—Ç –±–µ–∑ OAuth 1.0)

### ‚ùå –û—Ç–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ FatSecret**
   - –ù–µ—Ç OAuth authorization flow
   - –ù–µ—Ç –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

2. **–ò–º–ø–æ—Ä—Ç —Ü–µ–ª–µ–π –∏–∑ FatSecret**
   - –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–æ—Å—Ç—É–ø –∫ user profile API
   - –ù–µ–ª—å–∑—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª–∏

3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–Ω–µ–≤–Ω–∏–∫–∞ –ø–∏—Ç–∞–Ω–∏—è**
   - –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ API

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

1. **Agent API –∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ:**
```bash
docker-compose restart agent-api telegram-bot
# ‚Üí Container nutrition_agent_api  Started ‚úÖ
# ‚Üí Container nutrition_telegram_bot  Started ‚úÖ
```

2. **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- –ü–æ–∏—Å–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ FatSecret (client credentials) ‚úÖ
- /settings –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ü–µ–ª–∏ –±–µ–∑ —Å—Ç—Ä–æ–∫–∏ FatSecret ‚úÖ
- –ö–Ω–æ–ø–∫–∞ FatSecret —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ ‚úÖ

3. **–ö–æ–º–∞–Ω–¥—ã OAuth –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
- /connect_fatsecret ‚Üí "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ" ‚úÖ
- /sync_fatsecret ‚Üí "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞" ‚úÖ
- /disconnect_fatsecret ‚Üí "–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π" ‚úÖ

## –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç

**1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π:**
```
/settings ‚Üí üéØ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–ª–∏ –ø–æ –ö–ë–ñ–£
‚Üí –í—ã–±—Ä–∞—Ç—å —Ü–µ–ª—å (–ø–æ—Ö—É–¥–µ–Ω–∏–µ/–Ω–∞–±–æ—Ä –º–∞—Å—Å—ã/–∏ —Ç.–¥.)
‚Üí –í–≤–µ—Å—Ç–∏ –∫–∞–ª–æ—Ä–∏–∏
‚Üí –í–≤–µ—Å—Ç–∏ –±–µ–ª–∫–∏
‚Üí –í–≤–µ—Å—Ç–∏ —É–≥–ª–µ–≤–æ–¥—ã
‚Üí –í–≤–µ—Å—Ç–∏ –∂–∏—Ä—ã
‚Üí ‚úÖ –¶–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
```

**2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –µ–¥—ã:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–°—ä–µ–ª 2 —è–π—Ü–∞"
–ë–æ—Ç: ‚Üí –ü–æ–∏—Å–∫ –≤ FatSecret (—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ client credentials)
     ‚Üí –ù–∞—à—ë–ª –ø—Ä–æ–¥—É–∫—Ç "Eggs, whole"
     ‚Üí ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: 2 —è–π—Ü–∞ (140 –∫–∫–∞–ª)
```

**3. –û—Ç—á—ë—Ç—ã:**
```
/today ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–Ω–µ–≤–Ω–æ–π –æ—Ç—á—ë—Ç —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –∫ —Ü–µ–ª—è–º
/week ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ

### –ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–º–ø–æ—Ä—Ç —Ü–µ–ª–µ–π –∏–∑ FatSecret

**–í–∞—Ä–∏–∞–Ω—Ç A: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å OAuth 1.0**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `requests-oauthlib`
- –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `fatsecret_oauth_service.py` –¥–ª—è OAuth 1.0
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å three-legged flow
- –í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: ~2-3 –¥–Ω—è

**–í–∞—Ä–∏–∞–Ω—Ç B: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ API**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ nutrition API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π OAuth 2.0
- MyFitnessPal, Nutritionix, USDA FoodData Central

**–í–∞—Ä–∏–∞–Ω—Ç C: –û—Å—Ç–∞—Ç—å—Å—è –Ω–∞ —Ç–µ–∫—É—â–µ–º —Ä–µ—à–µ–Ω–∏–∏**
- –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∞–º–∏ –∑–Ω–∞—é—Ç —Å–≤–æ–∏ —Ü–µ–ª–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ª–æ–∂–Ω–æ–π OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Environment Variables

**–ú–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –∏–∑ .env (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è):**
```env
# FATSECRET_REDIRECT_URI=http://localhost:8000/v1/oauth/fatsecret/callback  ‚Üê –ù–µ –Ω—É–∂–µ–Ω
```

**–û—Å—Ç–∞–≤–∏—Ç—å –≤ .env (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è client credentials):**
```env
FATSECRET_CLIENT_ID=f30f6672d0b4472e8442d7831ce185f9
FATSECRET_CLIENT_SECRET=e496b3db72d9413fa63f3d98f0f2b3b4
```

### Database Schema

**–ü–æ–ª—è –≤ user_profile (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –Ω–æ –æ—Å—Ç–∞–≤–ª–µ–Ω—ã):**
```sql
fatsecret_user_id VARCHAR(255)      -- –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
fatsecret_access_token VARCHAR(512)  -- –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
fatsecret_refresh_token VARCHAR(512) -- –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
fatsecret_token_expires_at TIMESTAMP -- –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
fatsecret_connected BOOLEAN          -- –≤—Å–µ–≥–¥–∞ false
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ–ª—è –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å–ª—É—á–∞–π –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ OAuth 1.0.

## –§–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

1. **[FATSECRET_OAUTH_FINDINGS.md](FATSECRET_OAUTH_FINDINGS.md)**
   - –ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ FatSecret
   - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å OAuth 2.0
   - –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

2. **[OAUTH_REMOVAL_SUMMARY.md](OAUTH_REMOVAL_SUMMARY.md)** (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
   - –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å)

1. **[OAUTH_SETUP.md](OAUTH_SETUP.md)**
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ ngrok
   - –ë–æ–ª—å—à–µ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ (OAuth 2.0 authorization code –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)

2. **[FATSECRET_CONSOLE_GUIDE.md](FATSECRET_CONSOLE_GUIDE.md)**
   - –ü–æ–∏—Å–∫ redirect URI –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - –ë–æ–ª—å—à–µ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ (redirect URIs –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –¥–ª—è OAuth 2.0)

3. **[FATSECRET_OAUTH_IMPLEMENTATION.md](FATSECRET_OAUTH_IMPLEMENTATION.md)**
   - –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ OAuth 2.0 flow
   - –ë–æ–ª—å—à–µ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞)

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞ –∏–∑ –ø–ª–∞–Ω–∞

**–û–±–Ω–æ–≤–∏—Ç—å –æ—Ç—á—ë—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∫ —Ü–µ–ª—è–º**

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ OAuth –æ—Ç–∫–ª—é—á–µ–Ω –∏ —Ü–µ–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ /settings, –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

1. –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ –æ—Ç—á—ë—Ç–∞—Ö
2. –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∫—Ä–∞—Å–Ω—ã–π/–∂—ë–ª—Ç—ã–π/–∑–µ–ª—ë–Ω—ã–π)
3. –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ ("1500/2000 –∫–∫–∞–ª, 75%")

### –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–æ—Ç–∞

–ü–æ—Å–ª–µ –æ—Ç—á—ë—Ç–æ–≤:
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ—Ç–æ —ç—Ç–∏–∫–µ—Ç–æ–∫ (GPT-4o Vision)
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –£–ª—É—á—à–µ–Ω–∏–µ AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –∏–º–ø–æ—Ä—Ç —Ü–µ–ª–µ–π –∏–∑ FatSecret

**–í–∞—Ä–∏–∞–Ω—Ç 1: –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É FatSecret**
- Email: api@fatsecret.com
- –°–ø—Ä–æ—Å–∏—Ç—å: "How to access user profile data with OAuth 2.0?"

**–í–∞—Ä–∏–∞–Ω—Ç 2: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å OAuth 1.0**
- –ó–∞–Ω–∏–º–∞–µ—Ç 2-3 –¥–Ω—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –¢—Ä–µ–±—É–µ—Ç requests-oauthlib
- –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–ø–∏—Å—å OAuth —Å–µ—Ä–≤–∏—Å–∞

**–í–∞—Ä–∏–∞–Ω—Ç 3: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å**
- –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∞–º–∏ –≤–≤–æ–¥—è—Ç —Å–≤–æ–∏ —Ü–µ–ª–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ª–æ–∂–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## –í—ã–≤–æ–¥

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞**: –û—Ç–∫–ª—é—á–µ–Ω—ã –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ OAuth —Ñ—É–Ω–∫—Ü–∏–∏
‚úÖ **–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ü–æ–∏—Å–∫ –µ–¥—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω—ã**: –ö–æ–º–∞–Ω–¥—ã –æ–±—ä—è—Å–Ω—è—é—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
‚úÖ **–ö–æ–¥ —á–∏—Å—Ç—ã–π**: –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–µ–Ω—É–∂–Ω—ã–µ —á–∞—Å—Ç–∏ —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (–æ—Ç—á—ë—Ç—ã, —Ñ–æ—Ç–æ —ç—Ç–∏–∫–µ—Ç–æ–∫).
